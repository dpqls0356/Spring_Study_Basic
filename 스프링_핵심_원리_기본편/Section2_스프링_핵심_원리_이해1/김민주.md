## ğŸŒ¿ ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­ê³¼ ì„¤ê³„

> - íšŒì›
>   - íšŒì›ì„ ê°€ì…í•˜ê³  ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.
>   - íšŒì›ì€ ì¼ë°˜ê³¼ VIP
>   - íšŒì› ë°ì´í„°ëŠ” ìì²´ DB êµ¬ì¶•í•  ìˆ˜ë„ ìˆê³ , ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ì—°ë™í•  ìˆ˜ ìˆë‹¤.
> - ì£¼ë¬¸ê³¼ í• ì¸ ì •ì±…
>   - íšŒì›ì€ ìƒí’ˆì„ ì£¼ë¬¸í•  ìˆ˜ ìˆë‹¤.
>   - íšŒì› ë“±ê¸‰ì— ë”°ë¼ í• ì¸ ì •ì±… ì ìš©
>   - í• ì¸ ì •ì±…ì€ ê³ ì • ê¸ˆì•¡ í• ì¸ (VIP 1000ì› í• ì¸)
>   - í• ì¸ ì •ì±…ì€ ì•„ì§ ë¯¸ì •ì´ê³  í• ì¸ì„ ì ìš©í•˜ì§€ ì•Šì„ ìˆ˜ë„ ìˆë‹¤.(ë³€ê²½ ê°€ëŠ¥ì„± ë†’ìŒ)

- ìš”êµ¬ì‚¬í•­ì˜ ë¯¸í™•ì •ì¸ ë¶€ë¶„ì€ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë§Œë“¤ê³  êµ¬í˜„ì²´ë¥¼ êµì²´í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì„¤ê³„

## ğŸŒ¿ íšŒì› ë„ë©”ì¸ ì„¤ê³„

- íšŒì› ê°€ì…, ì¡°íšŒ ê¸°ëŠ¥
- íšŒì› ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ê³„ì¸µì„ ë”°ë¡œ ì„¤ê³„
  - ë©”ëª¨ë¦¬ íšŒì› ì €ì¥ì†Œ(local, ê°œë°œìš©), DB íšŒì› ì €ì¥ì†Œ, ì™¸ë¶€ ì‹œìŠ¤í…œ ì—°ë™ íšŒì› ì €ì¥ì†Œ
  - ì•„ì§ íšŒì› ë°ì´í„°ë¥¼ ì €ì¥í•  ë°©ì‹ì´ í™•ì •ì´ ë˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— êµ¬í˜„ì²´ë¥¼ êµì²´í•˜ëŠ” ë°©ì‹
- í´ë¼ì´ì–¸íŠ¸ëŠ” íšŒì› ì„œë¹„ìŠ¤ êµ¬í˜„ì²´(MemberServiceImpl)ë¥¼ ì°¸ì¡°í•˜ê³  íšŒì› ì„œë¹„ìŠ¤ëŠ” ë©”ëª¨ë¦¬ íšŒì› ì €ì¥ì†Œë¥¼ ì°¸ì¡°

## ğŸŒ¿ íšŒì› ë„ë©”ì¸ ê°œë°œ

- ìë™ ìƒì„± ëª©ë¡ ë‹¨ì¶•í‚¤ : Window ê¸°ì¤€ `alt + insert`, Mac ê¸°ì¤€ : `cmd + n`

```java
// íšŒì› ë“±ê¸‰
public enum Grade {
    BASIC,
    VIP
}
```

```java
// íšŒì› ì—”í‹°í‹°
public class Member {
    private Long id;
    private String name;
    private Grade grade;

    public Member(Long id, String name, Grade grade) {
        this.id = id;
        this.name = name;
        this.grade = grade;
    }
}
```

```java
// ë‹¤í˜•ì„±ì„ ìœ„í•œ ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„
public interface MemberRepository {
    void save(Member member);

    Member findById(Long memberId);
}
```

```java
public interface MemberService {
    void join(Member member);

    Member findMember(Long memberId);
}
```

```java
public class MemoryMemberRepository implements MemberRepository{

    // ë™ì‹œì„± ì´ìŠˆê°€ ìˆì„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì‹¤ë¬´ì—ì„œëŠ” Concurrent HashMap ì‚¬ìš©
    private static Map<Long, Member> store = new HashMap<>();

    @Override
    public void save(Member member) {
        store.put(member.getId(), member);
    }

    @Override
    public Member findById(Long memberId) {
        return store.get(memberId);
    }
}
```

```java
// êµ¬í˜„ì²´ê°€ í•œê°œì¼ ê²½ìš°ì—ëŠ” ê´€ë¡€ìƒ í´ë˜ìŠ¤ëª…ì— Impl ì‚¬ìš©
public class MemberServiceImpl implements MemberService{
    private final MemberRepository memberRepository = new MemoryMemberRepository();

    @Override
    public void join(Member member) {
        // ë‹¤í˜•ì„±ì— ì˜í•´ì„œ MemoryMemberRepository ì‹¤í–‰
        memberRepository.save(member);
    }

    @Override
    public Member findMember(Long memberId) {
        return memberRepository.findById(memberId);
    }
}
```

## ğŸŒ¿ íšŒì› ë„ë©”ì¸ ì‹¤í–‰ê³¼ í…ŒìŠ¤íŠ¸

- ê°’ ì…ë ¥ í›„ ë³€ìˆ˜ ìë™ ìƒì„± : `ctrl + alt + v`
- Junit ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ í…ŒìŠ¤íŠ¸

```java
public class MemberServiceTest {

    MemberService memberService = new MemberServiceImpl();

    @Test
    void join() {
        //given
        Member member = new Member(1L, "memberA", Grade.VIP);

        //when
        memberService.join(member);
        Member findMember = memberService.findMember(1L);

        //then
        Assertions.assertThat(member).isEqualTo(findMember);
    }
}
```

### íšŒì› ë„ë©”ì¸ ì½”ë“œì˜ ì„¤ê³„ ë¬¸ì œì 

- OCP, DIP ìœ„ë°˜
  - ì‹¤ì œ í• ë‹¹ ë¶€ë¶„ì´ ì¶”ìƒí™”ì—ë„ ì˜ì¡´í•˜ê³ , êµ¬ì²´í™”ì—ë„ ì˜ì¡´

```java
public class MemberServiceImpl implements MemberService { // ì¶”ìƒí™” ì˜ì¡´
    // êµ¬ì²´í™” ì˜ì¡´(êµ¬í˜„ì²´ ì˜ì¡´)
    private final MemberRepository memberRepository = new MemoryMemberRepository();
}
```

## ğŸŒ¿ ì£¼ë¬¸ê³¼ í• ì¸ ë„ë©”ì¸ ì„¤ê³„

- í• ì¸ ì •ì±…ì€ ë³€ê²½ ê°€ëŠ¥ì„±ì´ ë†’ê¸° ë•Œë¬¸ì— ì„¤ê³„ì— ìœ ì˜
- ì—­í• ê³¼ êµ¬í˜„ì„ **ë¶„ë¦¬**í•˜ì—¬ êµ¬í˜„ ê°ì²´ë¥¼ ì¡°ë¦½ì´ë‚˜ êµì²´ë§Œí•˜ë©´ ëœë‹¤.
- ì—­í• ë“¤ì˜ í˜‘ë ¥ ê´€ê³„ë¥¼ ê·¸ëŒ€ë¡œ ì¬ì‚¬ìš©

  - í•œ ì—­í• ì˜ êµ¬í˜„ì²´ë¥¼ ë³€ê²½í•˜ì—¬ë„ ë‹¤ë¥¸ ì—­í• ë“¤ì˜ êµ¬í˜„ì²´ì—ëŠ” ì˜í–¥ì´ ë¯¸ì¹˜ì§€ ì•ŠëŠ”ë‹¤.

- ë„ë©”ì¸ : í´ë¼ì´ì–¸íŠ¸, ì£¼ë¬¸ ì„œë¹„ìŠ¤ ì—­í• , íšŒì› ì €ì¥ì†Œ ì—­í• , í• ì¸ ì •ì±… ì—­í• 
  - ì£¼ë¬¸ ì„œë¹„ìŠ¤ ì—­í•  : ì£¼ë¬¸ ì„œë¹„ìŠ¤ êµ¬í˜„ì²´
  - íšŒì› ì €ì¥ì†Œ ì—­í•  : ë©”ëª¨ë¦¬ íšŒì› ì €ì¥ì†Œ, DB íšŒì› ì €ì¥ì†Œ
  - í• ì¸ ì •ì±… ì—­í•  : ì •ì•¡ í• ì¸ ì •ì±…, ì •ë¥  í• ì¸ ì •ì±…

### ì£¼ë¬¸ì„œë¹„ìŠ¤ì˜ ì—­í• 

1. ì£¼ë¬¸ ìƒì„± : í´ë¼ì´ì–¸íŠ¸ëŠ” ì£¼ë¬¸ ì„œë¹„ìŠ¤ì— ì£¼ë¬¸ ìƒì„±ì„ ìš”ì²­
2. íšŒì› ì¡°íšŒ : í• ì¸ì„ ìœ„í•˜ì—¬ íšŒì›ì˜ íšŒì› ë“±ê¸‰ ì¡°íšŒ
3. í• ì¸ ì ìš© : íšŒì› ë“±ê¸‰ì— ë”°ë¥¸ í• ì¸ ì—¬ë¶€ë¥¼ í• ì¸ ì •ì±…ì— ìœ„ì„
4. ì£¼ë¬¸ ì„œë¹„ìŠ¤ëŠ” í• ì¸ ê²°ê³¼ë¥¼ í¬í•¨í•œ ì£¼ë¬¸ ê²°ê³¼ ë°˜í™˜

## ğŸŒ¿ ì£¼ë¬¸ê³¼ í• ì¸ ë„ë©”ì¸ ê°œë°œ

### í• ì¸

```java
public interface DiscountPolicy {
    /**
     * @return í• ì¸ ëŒ€ìƒ ê¸ˆì•¡
     */
    int discount(Member member, int price);
}
```

```java
public class FixDiscountPolicy implements DiscountPolicy{

    private int discountFixAmount = 1000; // 1000ì› í• ì¸

    @Override
    public int discount(Member member, int price) {
        if(member.getGrade()== Grade.VIP) {
            return discountFixAmount;
        }
        return 0;
    }
}
```

### ì£¼ë¬¸

```java
public class Order {
    private Long memberId;
    private String itemName;
    private int itemPrice;
    private int discountPrice;
    ...
}
```

```java
public interface OrderService {
    Order createOrder(Long memberId, String itemName, int itemPrice);
}
```

```java
public class OrderServiceImpl implements OrderService{

    private final MemberRepository memberRepository = new MemoryMemberRepository();
    private final DiscountPolicy discountPolicy = new FixDiscountPolicy();

    @Override
    public Order createOrder(Long memberId, String itemName, int itemPrice) {
        Member member = memberRepository.findById(memberId);
        // í• ì¸ ì •ì±…ì— ìˆ˜ì •ì´ ìƒê²¨ë„ ë³€ê²½ì„ í•˜ì§€ ì•Šì•„ë„ ë¨(ë‹¨ì¼ì±…ì„ì›ì¹™)
        int discountPrice = discountPolicy.discount(member, itemPrice);
        return new Order(memberId, itemName, itemPrice, discountPrice);
    }
}
```

## ğŸŒ¿ ì£¼ë¬¸ê³¼ í• ì¸ ë„ë©”ì¸ ì‹¤í–‰ê³¼ í…ŒìŠ¤íŠ¸

- ë‹¨ìœ„ í…ŒìŠ¤íŠ¸(ì»¨í…Œì´ë„ˆì˜ ë„ì›€ì´ ì—†ëŠ” ìˆœìˆ˜ ìë°” ì½”ë“œ í…ŒìŠ¤íŠ¸)

```java
public class OrderServiceTest {
    MemberService memberService = new MemberServiceImpl();
    OrderService orderService = new OrderServiceImpl();

    @Test
    void createOrder(){
        Long memberId = 1L;
        Member member = new Member(memberId, "memberA", Grade.VIP);
        memberService.join(member);

        Order order = orderService.createOrder(memberId, "itemA", 10000);
        Assertions.assertThat(order.getDiscountPrice()).isEqualTo(1000);
    }
}
```
